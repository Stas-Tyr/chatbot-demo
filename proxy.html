<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chatbot Demo with Proxy</title>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            overflow: hidden;
        }
        #iframe-container {
            position: relative;
            width: 100%;
            height: 100vh;
        }
        iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: 0;
        }
    </style>
</head>
<body>
    <!-- Div to host the iframe -->
    <div id="iframe-container">
        <iframe id="proxy-iframe" src="https://zavodzame.si" frameborder="0"></iframe>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", function() {
            var iframe = document.getElementById('proxy-iframe');

            iframe.onload = function() {
                try {
                    // Check if the iframe content is accessible
                    var iframeDoc = iframe.contentWindow.document;
                    if (iframeDoc) {
                        // Inject the chatbot script into the iframe
                        var chatbotScript = iframeDoc.createElement('script');
                        chatbotScript.src = "https://app.aminos.ai/js/chat_plugin.js";
                        chatbotScript.setAttribute('data-bot-id', '19857');

                        iframeDoc.body.appendChild(chatbotScript);

                        // Log to confirm script injection
                        console.log("Chatbot script injected into iframe.");
                    } else {
                        console.error("Unable to access iframe document.");
                    }
                } catch (error) {
                    console.error("Error injecting script: ", error);
                }
            };

            // Handle iframe load errors
            iframe.onerror = function() {
                console.error("Error loading iframe content.");
            };
        });
    </script>
</body>
</html>
